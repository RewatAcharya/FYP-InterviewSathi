@using InterviewSathi.Web.Models.Entities
@{
    var messages = ViewBag.Messages as List<PrivateMessage>;
}

<div class="py-2 px-4 border-bottom d-lg-block">
    <div class="d-flex align-items-center py-1">
        <div class="position-relative">
            <img id="profile-pic" src="~/Images/Profiles/@Model.ProfileURL" class="rounded-circle mr-1" alt="Sharon Lessman" width="40" height="40">
        </div>
        <div class="flex-grow-1 pl-3">
            <a asp-action="UserProfile" asp-controller="Profile" asp-route-id="@Model.Id" class="text-black text-decoration-none">
                <strong>@Model.Name</strong>
            </a>
        </div>
        <div>
            <button id="startVideoButton" onclick="createOffer()" class="btn btn-info btn-lg mr-1 px-3 d-md-inline-block"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-video feather-lg"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></svg></button>
            <button class="btn btn-light border btn-lg px-3"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal feather-lg"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></button>
        </div>
    </div>
</div>
<div class="chat-messages">
    <ul id="messagesList" class="list-unstyled p-4">
        @foreach (var message in messages)
        {
            if (message.SenderId == Model.Id)
            {
                <li class="received">Received: @message.MessageContent</li>
            }
            else
            {
                <li class="sent">Sent: @message.MessageContent</li>
            }
        }
    </ul>
</div>
<div class="flex-grow-0 py-3 px-4 border-top">
    <div class="input-group">
        <input type="text" id="ddlSelUser" value="@Model.Id" hidden>
        <input type="text" id="ddlSelUserName" value="@Model.Name" hidden>
        <input type="text" id="txtPrivateMessage" class="form-control" placeholder="Type your message">
        <button id="sendButton" class="btn btn-primary" onclick="sendPrivateMessage()">Send</button>
    </div>
</div>


<video id="selfView" autoplay muted height="200px" width="300px"></video>
<video id="remoteView" autoplay height="200px" width="300px"></video>
<button id="joinVideoButton" class="btn btn-info btn-lg mr-1 px-3" style="display: none;" onclick="handleOffer()">Join Video Call</button>
<button id="hangUpButton" class="btn btn-danger" style="display: none;" onclick="hangUp()">Hang Up</button>


@* 
<button onclick="toggleVideo()">Toggle Video</button>
<button onclick="toggleAudio()">Toggle Audio</button>
<button onclick="toggleScreenSharing()">Toggle Media</button>
<button onclick="toggleFullscreen()">Toggle Fullscreen</button>

<video id="selfView" autoplay muted height="200px" width="300px"></video>
<script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>

<script src="~/js/chatvideo.js"></script> *@